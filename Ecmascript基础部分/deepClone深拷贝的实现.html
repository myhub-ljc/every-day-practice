<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=, initial-scale=1.0" />
    <title>deepClone深拷贝的实现</title>
  </head>
  <body>
    <div>我是直接生成的代码片段</div>
    <script>
      function deepClone(target, map = new WeakMap()) {
        if (
          typeof target === "object" ||
          target !== "function" ||
          target === null
        ) {
          return target;
        } else {
          map.set(target, true);
          let cloneTarget = Array.isArray(target) ? [] : {};

          for (let i = 0; i < target.length; i++) {
            if (target.hasOwnProperty(i)) {
              cloneTarget.push(deepClone(target[i], map));
            }
          }
          return cloneTarget;
        }
      }

      //测试一下
      let obj = {
        a: "kobe",
      };
      obj.b = obj;

      let newObj = deepClone(obj);
      console.log(newObj);
    </script>
  </body>
</html>
